<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="firera.js"></script>
        <script src="jquery.js"></script>
        <link rel="stylesheet" href="mik.css" />
    </head>
    <body>
        <div id="content" class="id-content test-todo-mvc"></div>
        <div id="content-devtool" class="id-content-devtool"></div>
		<script src="testapp.js"></script>
		<script src="inspector.js"></script>
		<script>
		$(function(){
				var _F = Firera._;
				var make_changes = () => {
						type('Do something useful');
						enter();
						type('Have a rest');
						enter();
						type('Write some tests');
						enter();

						type('Listen to music');
						enter();
						
						var $root = $(".test-todo-mvc");

						$root.find('ul > *:nth-child(1) .complete').click();
						$root.find('.clear-completed').click();
						$root.find('.clear-completed').click();
						$root.find('ul > *:nth-child(1) .complete').click();
				}
				var make_changes2 = () => {
						app.set('add_item', {});
						app.set('add_item', {});
						app.set('add_item', {});
				}
				window.set_data = () => {
						var dt = [Firera.getAppStruct()[0]];
						//console.log('set data', dt);
						//timer('start');
						var a = performance.now();
						app_devtool.set('data', dt);
						var b = performance.now();
						//timer('finish');
						console.log('total', b-a);
				}
				
				var app = Firera(app_struct);
				var app_devtool = Firera(app_struct_devtool);
				app_devtool.set('app', app);
				console.log('App', app);
				console.log('App devtool', app_devtool);
				/*setTimeout(() => {
					timer('FINISH', true);
				}, 1)	
				/*setTimeout(() => {
					set_data();
				}, 10)*/
				var sd = _F.throttle(set_data, 300);
				app.onChangeFinished(() => {
						setTimeout(sd, 1);
				});
				//*/
				setTimeout(set_data, 500);
				
				make_changes();
		})


		</script>
    </body>
</html>
